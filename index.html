<!doctype html>
<html lang="en">
<head>
<title>Thormor Vaults</title>
<meta charset="utf-8"/>
<link rel="stylesheet" href="css/style.css"/>
</head>
<body>
<h1>Thormor Vault</h1>

<p>A <strong>Thormor vault</strong> is a way to organize files online to form a
distributed, secure and private message exchange system.</p>

<h2>Why</h2>

<p>Current ways to post updates or share content lets the service
provider peek into what's being shared (Facebook, Google+, Gmail, Path
etc.)  Providers often track and analyze the user's actions and
content, and monetize the resultant profile. This often raises
concerns when potentially sensitive material is shared through such
services.</p>

<p>However, the technology to let us share content privately has been
around for a long time. By first encrypting content with the
recipient's public key, we can exchange sensitive data without
revealing the contents anyone except the recipient.</p>

<p>If we formalize this idea, we can write client applications that
allows users to independently share private, secured messages using
just online storage. When necessary, they can exercise control over
who can read their messages without needing to expose the contents to
a provider.</p>

<h2>Summary</h2>

<p>Users store messages online, PGP encrypted with the recipient's public
key. Recipients access the sender's storage to fetch messages, and
decrypt them locally with their private key.</p>

<h2>Assumptions and goals</h2>

<ol>
<li><p>Any online service may inspect, modify or reveal messages to anyone.</p></li>
<li><p>Protect all messages transmitted or stored online, so only the
intended recipients can understand the message.</p></li>
<li><p>Open specification, anyone should be able to write an application
to host and share messages.</p></li>
</ol>

<h2>Not goals</h2>

<ol>
<li><p>Discovering vaults. How do you find the thormor vault for a
particular person?</p></li>
<li><p>Traffic analysis and anonymity. It may be possible for storage
providers to use data access patterns to identify connections
between individuals even if the content being exchanged is
encrypted.</p></li>
<li><p>Securing content locally. Once a message is decrypted on a user's
device, the contents are visible to other applications running
locally.</p></li>
</ol>

<h2>High-level structure</h2>

<p><img src="images/vault.png" alt="Structure of a Thormor Vault"
     style="height:29.875em;"/></p>

<ol>
<li><p>Encrypted data is stored online, publicly downloadable by anyone who
has a link to it.</p></li>
<li><p>A vault is identified by a URL that points to a signed JSON file in
the cloud. This is the <strong>root</strong> file, which points to other files
of interest.</p></li>
<li><p>The root file contains a URL to the user's PGP public key and a
URL to an <strong>outbox list</strong> file.</p></li>
<li><p>The outbox list is a signed JSON file with a list of URLs, each
pointing to an <strong>outbox</strong> file. There may be one or more outbox
files for each recipient who can access the vault.</p></li>
<li><p>Each outbox file is an encrypted JSON file with entries, one for
each message. A message may internally refer to other encrypted
files, depending on the type of message. For instance, a message
sharing a picture contains metadata about the picture as well as a
URL to the image itself.</p>

<p>The outbox file and any referenced files are encrypted with the
recipient's public key, so only the recipient can read this outbox.</p></li>
<li><p>To send a message to a list of recipients, the sender first adds an
outbox entry, one for each recipient. The sender then updates the
outbox file for each recipient (after encrypting the outbox file
with the recipient's public key and signing it.)</p></li>
<li><p>To fetch messages, the receiver polls the sender's outbox URL for
that recipient, and decrypts it locally to recover the message
entries.</p></li>
<li><p>Senders may also choose to create <strong>detached</strong> messages. Such
messages do not require the outbox mechanism. A detached message is
simply stored as a separate file, and the URL to this file is
directly used to retrieve the message.</p></li>
<li><p>URLs to detached messages may be used to send secure messages over
an existing communication channel with a recipient. For instance,
the URL can be sent as a private message on twitter or facebook
with a hashtag to identify it as a detached message. Client
applications can detect such messages, fetch the URL and decrypt it
locally.</p></li>
</ol>

<h2>Overview and demo</h2>

<iframe width="640" height="385" src="http://www.youtube.com/embed/huyQZYG_vWs" frameborder="0" allowfullscreen style="margin-bottom: 11px"></iframe>

<h2>More Information</h2>

<ul>
<li><p>There is a <a href="spec.html" title="Thormor Vault Specification">specification</a>
with details about the format of vaults and messages.</p></li>
<li><p>A <a href="https://github.com/kbsriram/thormor" title="Github repository for library">standalone java library</a> including a sample shell to manage
vaults.</p></li>
</ul>
</body>
</html>
